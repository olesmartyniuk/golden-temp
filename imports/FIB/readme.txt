274. 1. Ошибка при выполнении DDL  запросов в уникодном коннекте. 
        (портились комментарии сделанные на не английском языке)   
  
272
 1. Добавилась опция poUseSelectForLock в TpFIBDataSet.Options. 
    Действует при включенном poProtectedEdit. В случае включения этой опции, 
    блокирование записи будет производиться не "холостым апдейтом" а конструкцией
    
    Select * from TABLE1 WHERE ... for update with lock
    (работает ТОЛЬКО для ФБ)
 2. Метод FIBQuery.ExecuteImmediate. Немедленно выполняет запрос без предварительной 
    препарации. (См. документацию по ИБ АПИ функции isc_dsql_execute_immediate)
 3. Выполнение DDL запросов сейчас производится через  ExecuteImmediate

270  
 1. В некоторых случаях неверно происходило  добавление в сортированный НД
 2. В процедуре CopyFieldsProperties добавлено копирование свойств 
  AutoGenerateValue, ConstraintErrorMessage, CustomConstraint, Tag и Index 
 3. Ошибка в TpFIBCustomService.GenerateSPB. Проявлялась при пустом значениии Params
 4. При смене свойства  Filter  не происходит зануления результатов предыдущего фильтра.
 5. Ошибка в методе Locate  при попытке поиска числовых значений в стринговых полях.
 6. SQLMonitor стал показывать текст сиквела уже после применения макросов и кондишенов 
 7. Событие OnFillClientBlob теперь вызывается  не только при первом считывании записи, 
    но и после ее модификации 
 8. Свойство pFIBDataSet.ReceiveEvents и событие pFIBDataSet.OnUserEvent объявляется устаревшим и убирается из основного кода.
    Тем кто все же использует его, нужно компилироваться с дефайном 
USE_DEPRECATE_METHODS2 в файле FIBplus.inc
 9. Поправлена работа SQLMonitor при мониторинге эксепшнов. (Иногда приводило к зависанию)
10. SQL редактор датасета подправлен, для правильной работы с запросами в которых одна и 
    та же таблица входит по нескольку раз.    (гарантия только под ФБ2)
 
269. Не был предусмотрен тип ftSmallInt  для кэшированных вычисляемых полей 
     в TFIBCustomDataSet.RecordFieldValue

268. Неправильная обработка полей с чарсетом UTF8  и коллэйтом отличным от 
умолчательного.

267.
 1. При обнаружении что база находится в shutdown коннект автоматически закрывается,
    далее производится обработка потери коннекта (при использовании pFibErrorHandler)
 2. Ошибка в  генераторе запросов. Не показывался тип поля, для полей DOUBLE PRECISION
266.
 1. Небольшая утечка памяти при работе с блоб-параметрами в некоторых случаях
 2. Ошибка при поиске (Locate) unicode-строки в поле varchar(unicode_fss) при 
    включенной опции poTrimCharFields 

265
 1. Поправлена функция 
    function  InvertOrderClause(const OrderText:string):string;
    (не обрабатывала ордер бай с употреблением NULLS FIRST, как следствие это приводило 
    к некорректной работе режима ограниченного кэша для таких запросов)
254
 1. Поправлены методы TpFIBDataSet.PSInTransaction, PSStartTransaction,PSEndTransaction


253
 1. Более корректная обработка запросов "COMMIT" "ROLLBACK".
 2. Поправлен  редактор репозитория ошибок. Неправильно работал при выборе 
    "Unique Indices"
 3. Исправлена ошибка в методе FIBDataSet.RecordFieldValue(Field:TField;aBookmark:TBookmark):Variant; 
251

1.Если текущий текст клаузы PLAN в запросе TpFIBDataSet.SelectSQL использует неявный JOIN (т.е. 
  начинается не со слова JOIN, а со скобки), то присваивание свойству TpFIBDataSet.PlanClause нового значения имеет 
  результатом запрос с неверной клаузой PLAN (в нём присутствует ненужная скобка после слова PLAN).
  Исправлено
2. TpFibErrorHandler исправил обработку сообщений о пользовательских эксепшнах под ФБ2.
   (с учетом введенного в этой версии PSQL Stack Trace) 
3. Мелкая ошибка  в методе FIBQuery.PrepareArraySqlVar 
4. Подправлена обработка потери коннекта для случая когда производится попытка его 
   восстановления

250.
  1. TFIBCustomDataSet.RecordFieldValue отстутствовала обработка BOOLEAN полей 
     от ИБ7
  2. Добавлена обработка полей чарсета UTF8 для ФБ1.5 и ФБ2
  3. Для датабэйса добавилось свойство
      property UseBlrToTextFilter :boolean 
     Включает выключает обработку блоб полей с подтипами Blr (2), Acl(3)
     (Задолбали меня. Подтип 2 оказывается слишком многие используют не по назначению)

248.
   CloneCurRecord: error with boolean field in record (IB7)
247
 1.Ошибка в LocateNext. Если последняя запись датасета удовлетворяет условию поиска,
   и поиск начинается с нее, то LocateNext возвращал True
 2.Неправильная работа методов  LocateXXX в сочетании с фильтрацией по 
   вычисляемым полям. Проявлялась в случае если Locate происходил по невычисляемым 
   полям а фильтрация по вычисляемым

 3. Метода  FIBDatabase.QueryValueAsStr стала возвращать пустую строку в случае 
    когда  запрос, передаваемый в функцию ничего не возвращает или возвращаемое поле Null,

 4. Если установить в датасете CachedUpdates=True и поставить в OnUpdateError "UpdateAction:=uaAbort;", 
    то после отработки OnUpdateError возникал EAccessViolation.

245
 1.В датасете появился обработчик
 TOnApplyFieldRepository=procedure(DataSet:TDataSet;Field:TField;FieldInfo:TpFIBFieldInfo) of object;
 2.В DSContainer появился обработчик аналогичный п1
 3.В DSContainer появилась проперть IsGlobal:boolean. При взведении ее в True 
   действие контейнера начинает распространяться на ВСЕ датасеты  приложения.

Совокупность п1-3 позволяет разработчику легко использовать свои собственные настройки в
репозитарии полей. Как пример. Если хочется настраивать свойство EditMask, то добавляем
в таблицу репозитория поле  EDIT_MASK, в приложении ставим контейнер, делаем его глобальным
в обработчике  OnApplyFieldRepository пишем:

procedure TForm1.DataSetsContainer1ApplyFieldRepository(DataSet: TDataSet;
  Field: TField; FieldInfo: TpFIBFieldInfo);
begin
 Field.EditMask:=FieldInfo.OtherInfo.Values['EDIT_MASK'];
end;

243
 1. Ошибка в SQLEditor при попытке работы с СП.
 2. Ошибка при генерации RefreshSQL если алиас таблицы начинается с буквосочетания "AS"
 
242
 1. Ошибка при выполнении некоторых execute block
 2. Ошибка при обработке потери коннекта в случае если существует несколько коннектов к разным базам

241
 1. Для полей LargeInt  свойство Filter неработоспособно
 2. Плавающее АВ при обращении к DoTrim когда в качестве аргумента используется пустая строка
 


240
1.LocateNext работает неправильно, если не все записи выбраны в кэш 
2.ExtLocate при успешном поиске по сортированному датасету, при наличии нескольких одинаковых 
  по искомым полям записей, иногда показывал не первую найденную запись, а последнюю

234
 BCD поля не могли использоваться в качестве лукапных
232
 1. AV под дизайном BDS2006  в CBuilder проектах
 2. Небольшая поправка в SQLNavigator из FIBPlusTools.
При открытии окна SQL Navigator над свежесозданным проектом приложения (File->New->Application; FibPlus->SQL Navigator:) 
происходило исчезновение из проекта модуля, созданного по умолчанию (Unit1.pas).
 3. Мелкие ошибки при поиске в тексте SQL в SQLEditor

231
1. Добавлен обработчик TFIBDataSet.
    property AfterUpdateRecord: TFIBAfterUpdateRecordEvent read FAfterUpdateRecord
     write FAfterUpdateRecord
где  


  TFIBAfterUpdateRecordEvent = procedure(DataSet: TDataSet; UpdateKind: TUpdateKind;
    var Resume:boolean) of object;

Вызывается из ApplyUpdates,ApplyUpdToBase для каждой записи модификации которой 
отправляются на сервер. Вызывается непосредственно ПОСЛЕ того как успешно вызвался 
запрос на изменения.
2. Ошибка при Locate: если в датасете запись была удалена, а после этого был вызван 
   Locate условиям которого она удовлетворяет
3. Ошибка при обработке Field.DisplayFormat  вида 
"#,##0.00;-#,##0.00; ;"
4. Неправильная работа  SQL editor при установленном флажке "Use Selected Fiedls Only"
5. Неправильная работа  SQL editor при генерации рефреша, при присутствии в начале 
   SelectSQL закомментированного текста

230
 1.Неправильная работа опции dcForceMasterRefresh
 2.Ошибка в poKeepSorting при попытке изменения ПЕРВОЙ записи датасета 
 3.Подвисание при использовании poKeepSorting  
 4.Ошибка при применении poProtectedEdit .Позиция текущей записи сбивалась
 5. Пакеты под BDS2006  переделаны. В предыдущей версии они не работали при 
   попытке использования в CBuilder приложениях
 6. В тулзах закладка Preferences  пополнены опциями poUseLargeIntField в 
    PrepareOptions и настройкой DateTimeDisplay в DefaultFormats



225-226
 Тулзы под D2006

224
 Пакеты под D2006
214
1. Обошли ошибку компилятора E5912. Проявлялась при попытке скомпилировать 
   строки FIBBCDField.Value:=1;

2. Ошибка при работе с памятью в TFIBStringField. Проявлялась когда поля были
   созданы под дизайном, а в рантайме менялся текст SQL таким образом, что длина
   поля изменялась в большую сторону.  
 
                                                      
213
Добавилась опция датасета poRefreshAfterDelete. Если включена, то после 
DataSet.Delete производится попытка рефреша только что удаленной записи. 
Если попытка успешная (т.е. запись физически не была удалена), то запись не 
будет  помечаться в кэше как удаленная и останется видимой.